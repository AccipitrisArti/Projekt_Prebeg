---
title: "Finančni zakup vozil (lizing)"
author: "Anže Marinko"
date: 2. julij 2015
output: html_document
---

Sem Anže Marinko, študent 3. letnika finančne matematike na Fakulteti za matematiko in fiziko na Univerzi v Ljubljani. V tem potočilu bom predstavil svoje rezultate napovedovanja tveganja finančnega zakupa (lizing) vozil. Seminarsko nalogo sem naredil v okviru predmeta Izbrane teme iz analize podatkov.

***

## Podatkovna množica

Učna podatkovna množica vsebuje 6.062 predmetov zakupa (leasinga) vozil, ki jih je leta 2015 obravnavalo izbrano leasing podjetje v Sloveniji. Vsak predmet je opisan z 31 spremenljivkami, ki se nanašajo na lastnosti stranke, njenega delodajalca, leasing predmeta, vozila in njegovega dobavitelja. Ciljna spremenljivka je *Lodobren*.


```{r uvoz, echo=FALSE, message=FALSE, warning=FALSE}
source("analiza-podatkov/napovedovanje.r", encoding = "UTF-8")
```

## Transformacija podatkov
Uvozil sem učne in testne podatke, jih normaliziral po stolpcih (tu pride do polnadzorovanega učenja) in ugotovil, da podatki manjkajo pri *Splacilni_indeks* in *Szapadlo_neplacano*, kjer manjka 60% podatkov (enako tudi pri testnih podatkih). Ker pa so v obeh stolpcih manjkajoči podatki na istih mestih, sem dodal le en stolpec z enicami na tistih mestih in ničlami sicer, manjkajoče podatke pa sem nadomestil s povprečjem stolpca.

Nato sem namesto diskretnih spremenljivk dodal naivne spremenljivke (spremenljivka *Vznamka* je imela sprva 48 možnosti), spremenljivke z majhno varianco sem odstranil (veliko znamk vozil je imelo namreč le po nekaj pojavitev v stolpcu *Vznamka*).

Ciljna spremenljivka je bila sprva porazdeljena (*DA*: 60%; *NE*: 40%), zato sem prevzorčil (*pre=30*) in podvzorčil (*pod=400*). Tako sem dobil 3097 (2383 x 1.3) *NE* in 2856 (2383 x 0.3 x 4) *DA*, torej razmerje 48:52.

Zdaj ima učna množica 61 napovednih spremenljivk in 5953 primerov.

Oglejmo si nekaj izbranih primerov pri nekaj izbranih spremenljivkah (numerične spremenljivke so normalizirane in pomnožene s 1000):

```{r razpredelnica, echo=FALSE, message=FALSE, warning=FALSE}
trainData[c(1:5,5001:5005),
               c("VznamkaBMW","VznamkaCITROEN",
                  "VznamkaPEUGEOT","Dstpogodb",
                  "Snetoplaca", "Sstarost","Lodobren")]
```


***

## Grajenje modelov

Razlika med napakami tipa FP in FN!

```{r rferr, echo=FALSE, message=FALSE, warning=FALSE}
plot(finalModel,title="Random forest model")
```

## Predstavitev in napovedi končnega modela

Poleg poročila o tem, kako ste zgradili napovedni model, za izbrani, najboljši napovedni model oddajte njegove napovedi ciljne spremenljivke na testni množici podatkov. To naj bo (csv) tabela z enim stolpcem, ki podaja napovedi v enakem vrstnem redu kot so razvrščeni primeri v testni množici. Oddana tabela lahko vsebuje tudi drugi stolpec, ki napove verjetnost sklenitve pogodbe za podan testni primer.

# Zaključek

ooo

***